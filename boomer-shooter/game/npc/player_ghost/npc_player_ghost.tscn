[gd_scene load_steps=22 format=3 uid="uid://bvmiv8hpkkiaw"]

[ext_resource type="PackedScene" uid="uid://cpfk5dfdx54m2" path="res://content/models/character.glb" id="1_ree31"]
[ext_resource type="Script" uid="uid://d4msoh7sckfae" path="res://game/npc/player_ghost/npc_player_ghost.gd" id="2_7ttuq"]
[ext_resource type="AnimationNodeBlendTree" uid="uid://dqjgomdtemo5l" path="res://game/npc/npc_animation_blend_tree.tres" id="3_mhbyw"]
[ext_resource type="Texture2D" uid="uid://615kt0434g5d" path="res://content/textures/ghost_skin.png" id="3_ybp5j"]
[ext_resource type="AnimationLibrary" uid="uid://b0i7f5lwho16o" path="res://content/models/npc_animation_library.glb" id="4_12aul"]
[ext_resource type="AudioStream" uid="uid://dsfismre384c4" path="res://game/player/die.tres" id="5_sgjlc"]
[ext_resource type="AudioStream" uid="uid://dhuda65t0d0uu" path="res://game/player/jump.tres" id="6_ekaqp"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_abmx6"]
albedo_texture = ExtResource("3_ybp5j")

[sub_resource type="SphereShape3D" id="SphereShape3D_3ocbx"]
radius = 5.0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_3ocbx"]
albedo_color = Color(0, 0, 0, 1)

[sub_resource type="BoxMesh" id="BoxMesh_3ocbx"]
size = Vector3(0.015, 0.045, 0.355)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_ye2x2"]
albedo_color = Color(0, 0, 0, 1)

[sub_resource type="CylinderMesh" id="CylinderMesh_ye2x2"]
top_radius = 0.01
bottom_radius = 0.01
height = 0.3

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_jjuis"]
albedo_color = Color(0, 0, 0, 1)

[sub_resource type="BoxMesh" id="BoxMesh_jjuis"]
size = Vector3(0.005, 0.07, 0.04)

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_4lf16"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_ybp5j"]
albedo_color = Color(1.41986e-06, 0.459676, 0.238806, 1)

[sub_resource type="CylinderMesh" id="CylinderMesh_abmx6"]
material = SubResource("StandardMaterial3D_ybp5j")
top_radius = 0.2
bottom_radius = 0.2
height = 0.05
radial_segments = 7
rings = 1

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_xjqdh"]
albedo_color = Color(0, 0, 0, 1)
metallic = 0.73
metallic_specular = 0.94
roughness = 0.54

[sub_resource type="QuadMesh" id="QuadMesh_yuxsl"]
size = Vector2(0.1, 0.1)

[sub_resource type="QuadMesh" id="QuadMesh_hw6qt"]
size = Vector2(0.085, 0.01)

[node name="NPCPlayerGhost" instance=ExtResource("1_ree31")]
collision_layer = 2
collision_mask = 0
script = ExtResource("2_7ttuq")

[node name="Skeleton3D" parent="Armature" index="0"]
bones/1/position = Vector3(-3.8147e-08, 0.652988, -0.0273547)
bones/1/rotation = Quaternion(-0.111483, -0.339919, -0.0265385, 0.933446)
bones/2/position = Vector3(-4.19095e-09, 0.0988135, -0.0128012)
bones/2/rotation = Quaternion(-0.0043987, -0.000306625, 0.00231865, 0.999988)
bones/3/rotation = Quaternion(0.142101, 3.24719e-05, -0.00560781, 0.989836)
bones/4/position = Vector3(1.86265e-09, 0.132852, -1.86265e-09)
bones/4/rotation = Quaternion(0.143019, -0.000375868, -0.00553717, 0.989704)
bones/5/position = Vector3(-5.58793e-09, 0.149459, 1.87073e-08)
bones/5/rotation = Quaternion(0.0721027, 0.0645201, 0.0120293, 0.995236)
bones/6/position = Vector3(-1.49012e-08, 0.0965834, 0.0312217)
bones/6/rotation = Quaternion(-0.027806, 0.191189, 0.0914642, 0.976887)
bones/8/rotation = Quaternion(0.41593, 0.199573, -0.59018, 0.662466)
bones/9/position = Vector3(-5.35978e-08, 0.158563, 2.94518e-08)
bones/9/rotation = Quaternion(0.39585, -0.246641, 0.21287, 0.858579)
bones/10/position = Vector3(-1.20277e-07, 0.197834, 2.30363e-08)
bones/10/rotation = Quaternion(-0.005821, 0.0117595, 0.539695, 0.841759)
bones/11/position = Vector3(6.94512e-08, 0.198224, -3.19925e-08)
bones/11/rotation = Quaternion(-0.0863778, -0.770117, -0.232164, 0.587842)
bones/12/position = Vector3(-0.0213561, 0.0398657, -0.0018126)
bones/12/rotation = Quaternion(0.14244, -0.0149392, 0.763551, 0.629665)
bones/13/rotation = Quaternion(-0.00212349, 0.167153, -0.620836, 0.76591)
bones/14/position = Vector3(1.59995e-08, 0.0217018, -2.88509e-08)
bones/14/rotation = Quaternion(0.107464, -0.00988121, -0.0933208, 0.98977)
bones/15/position = Vector3(-1.69715e-08, 0.0232753, 8.16027e-08)
bones/16/position = Vector3(-0.00473966, 0.0749168, 0.00173577)
bones/16/rotation = Quaternion(0.356719, 0.0840478, 0.300734, 0.880481)
bones/17/position = Vector3(-7.9973e-10, 0.0253378, 1.94865e-08)
bones/17/rotation = Quaternion(0.522705, -0.0190316, -0.0971015, 0.846752)
bones/18/position = Vector3(2.69475e-08, 0.0262806, 6.68323e-08)
bones/18/rotation = Quaternion(0.177353, 0.0706519, -0.0161312, 0.981475)
bones/19/position = Vector3(5.51524e-08, 0.0195303, -9.21322e-09)
bones/20/position = Vector3(0.00547122, 0.0743583, 0.000848703)
bones/20/rotation = Quaternion(0.45955, -0.0267719, -0.0602871, 0.885699)
bones/21/rotation = Quaternion(0.543451, -0.00938897, -0.0639139, 0.836952)
bones/22/position = Vector3(2.7754e-08, 0.0266088, -2.54952e-08)
bones/22/rotation = Quaternion(0.149863, -0.00620252, -0.0505861, 0.987392)
bones/23/position = Vector3(2.078e-08, 0.0254161, 1.12037e-07)
bones/24/position = Vector3(0.0143095, 0.0727273, 0.00147598)
bones/24/rotation = Quaternion(0.479404, -0.220062, -0.424639, 0.735817)
bones/25/position = Vector3(4.644e-08, 0.0195015, -3.26013e-08)
bones/25/rotation = Quaternion(0.605569, 0.0203412, 0.00792673, 0.795493)
bones/26/position = Vector3(1.16836e-07, 0.0119783, 1.0111e-07)
bones/26/rotation = Quaternion(0.222827, -0.0309287, 0.0171364, 0.974217)
bones/27/position = Vector3(-2.81864e-08, 0.0169014, -4.84061e-08)
bones/28/rotation = Quaternion(0.308567, -0.24891, 0.662511, 0.635538)
bones/29/position = Vector3(4.8757e-08, 0.158563, -1.41372e-07)
bones/29/rotation = Quaternion(0.454219, -0.170622, -0.508138, 0.711596)
bones/30/position = Vector3(-8.89159e-09, 0.197834, 3.81002e-08)
bones/30/rotation = Quaternion(-0.00203298, -0.0146279, -0.761496, 0.648001)
bones/31/position = Vector3(2.19257e-08, 0.198224, 9.78683e-09)
bones/31/rotation = Quaternion(-0.152749, 0.284101, 0.243233, 0.914764)
bones/32/position = Vector3(0.0213562, 0.0398658, -0.00181274)
bones/32/rotation = Quaternion(0.208421, -0.0781171, -0.789182, 0.572407)
bones/33/position = Vector3(8.56142e-08, 0.0222242, -9.54527e-08)
bones/33/rotation = Quaternion(-0.0643828, -0.208042, 0.743936, 0.631769)
bones/34/position = Vector3(-5.80557e-09, 0.0217018, -3.67596e-09)
bones/34/rotation = Quaternion(-0.0142528, -0.113689, 0.605755, 0.787358)
bones/36/position = Vector3(0.00473975, 0.0749169, 0.00173573)
bones/36/rotation = Quaternion(0.162074, -0.0155336, -0.356775, 0.919893)
bones/37/position = Vector3(2.76584e-08, 0.0253378, -1.42308e-08)
bones/37/rotation = Quaternion(0.309285, 0.00798343, 0.0726527, 0.948157)
bones/38/position = Vector3(4.82857e-09, 0.0262807, 6.42459e-08)
bones/38/rotation = Quaternion(0.225438, -0.0715273, 0.0173766, 0.971473)
bones/39/position = Vector3(5.68963e-08, 0.0195303, 9.96716e-08)
bones/40/position = Vector3(-0.00547125, 0.0743585, 0.000848602)
bones/40/rotation = Quaternion(0.4498, 0.00744513, 0.0831184, 0.889222)
bones/41/rotation = Quaternion(0.824347, 0.0130757, 0.0652398, 0.562161)
bones/42/position = Vector3(1.23616e-08, 0.0266087, -1.15577e-08)
bones/42/rotation = Quaternion(0.158126, 0.00724945, 0.0471825, 0.986264)
bones/44/position = Vector3(-0.0143093, 0.0727274, 0.00147595)
bones/44/rotation = Quaternion(0.45072, 0.218681, 0.398985, 0.768011)
bones/45/rotation = Quaternion(0.777618, -0.0340554, -0.00251652, 0.62781)
bones/46/position = Vector3(-1.266e-07, 0.0119782, 3.6267e-08)
bones/46/rotation = Quaternion(0.426364, 0.0222898, -0.0141496, 0.904167)
bones/47/position = Vector3(-3.07044e-08, 0.0169014, 2.04922e-08)
bones/48/position = Vector3(0.075523, -0.0549383, -0.000493263)
bones/48/rotation = Quaternion(0.395067, 0.0567174, 0.9032, -0.157908)
bones/49/position = Vector3(7.62862e-09, 0.264065, 4.9951e-09)
bones/49/rotation = Quaternion(-0.182953, -0.0093543, -0.0179797, 0.982913)
bones/50/position = Vector3(-9.15468e-09, 0.279005, -2.64242e-08)
bones/50/rotation = Quaternion(0.549587, -0.0247852, -0.0558149, 0.833202)
bones/51/position = Vector3(7.45964e-09, 0.190872, -6.79815e-09)
bones/51/rotation = Quaternion(0.222738, -0.181029, 0.158871, 0.944657)
bones/53/position = Vector3(-0.0755229, -0.0549383, -0.000493261)
bones/53/rotation = Quaternion(0.0460612, -0.0332303, 0.99657, 0.0601893)
bones/54/position = Vector3(-7.27499e-09, 0.264065, 1.17389e-08)
bones/54/rotation = Quaternion(-0.275058, 0.00838493, 0.0209289, 0.961163)
bones/55/position = Vector3(1.68247e-08, 0.279006, -9.08872e-09)
bones/55/rotation = Quaternion(0.69331, 0.172284, 0.0429129, 0.698425)
bones/56/rotation = Quaternion(0.222303, 0.181111, -0.158794, 0.944757)
bones/57/position = Vector3(4.16578e-09, 0.0707696, -2.94572e-10)

[node name="LookAtModifier3D" type="LookAtModifier3D" parent="Armature/Skeleton3D" index="0"]
unique_name_in_owner = true
bone_name = "mixamorig_Head"
bone = 6

[node name="Skin" parent="Armature/Skeleton3D" index="1"]
material_override = SubResource("StandardMaterial3D_abmx6")

[node name="AnimationTree" type="AnimationTree" parent="." index="1"]
root_motion_track = NodePath("Armature/Skeleton3D:Root")
root_motion_local = false
tree_root = ExtResource("3_mhbyw")
anim_player = NodePath("../AnimationPlayer")
parameters/Blend2/blend_amount = 0
"parameters/Blend2 2/blend_amount" = 0
parameters/HitHead/active = false
parameters/HitHead/internal_active = false
parameters/HitHead/request = 0
parameters/Holding/current_state = ""
parameters/Holding/transition_request = ""
parameters/Holding/current_index = -1
parameters/MoveDirection/blend_position = Vector2(0, 0)
parameters/Special/current_state = "Moving"
parameters/Special/transition_request = ""
parameters/Special/current_index = 0
parameters/TimeScale/scale = 1.0

[node name="RootMotionView" type="RootMotionView" parent="." index="2"]
animation_path = NodePath("../AnimationTree")

[node name="Vision" type="Area3D" parent="." index="3"]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.56873, 0)
collision_layer = 2
collision_mask = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="Vision" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 4.51003)
shape = SubResource("SphereShape3D_3ocbx")

[node name="LeftHandBoneAttachment" type="BoneAttachment3D" parent="." index="4"]
transform = Transform3D(-0.575657, -0.51673, 0.633726, -0.235709, 0.846984, 0.476507, -0.782981, 0.12493, -0.609371, -0.0852612, 1.14094, 0.450606)
bone_name = "mixamorig_LeftHandMiddle1"
use_external_skeleton = true
external_skeleton = NodePath("../Armature/Skeleton3D")

[node name="RightHandBoneAttachment2" type="BoneAttachment3D" parent="." index="5"]
transform = Transform3D(0.241708, -0.494647, -0.834806, 0.816935, 0.56799, -0.100018, 0.523635, -0.657807, 0.541383, -0.136379, 1.11061, 0.130604)
bone_name = "mixamorig_RightHandMiddle3"
use_external_skeleton = true
external_skeleton = NodePath("../Armature/Skeleton3D")

[node name="SickAssGun" type="MeshInstance3D" parent="RightHandBoneAttachment2" index="0"]
transform = Transform3D(-0.0686942, 1.26062, 0.733297, -0.513229, 0.666252, -1.19345, -1.3651, -0.313923, 0.411793, 0.145057, -0.0653292, 0.02294)
material_override = SubResource("StandardMaterial3D_3ocbx")
mesh = SubResource("BoxMesh_3ocbx")
skeleton = NodePath("../..")

[node name="RightHand" type="Marker3D" parent="RightHandBoneAttachment2/SickAssGun" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.0971346)

[node name="LeftHand" type="Marker3D" parent="RightHandBoneAttachment2/SickAssGun" index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.0891441)

[node name="MeshInstance3D2" type="MeshInstance3D" parent="RightHandBoneAttachment2/SickAssGun" index="2"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, -0.000823617, 0.0554796)
material_override = SubResource("StandardMaterial3D_ye2x2")
mesh = SubResource("CylinderMesh_ye2x2")
skeleton = NodePath("../../..")

[node name="MeshInstance3D" type="MeshInstance3D" parent="RightHandBoneAttachment2/SickAssGun" index="3"]
transform = Transform3D(1, 0, 0, 0, 0.990105, -0.140331, 0, 0.140331, 0.990105, 0, -0.0524004, -0.0874176)
material_override = SubResource("StandardMaterial3D_jjuis")
mesh = SubResource("BoxMesh_jjuis")

[node name="AnimationPlayer" type="AnimationPlayer" parent="." index="6"]
root_motion_track = NodePath("Armature/Skeleton3D:Root")
root_motion_local = false
libraries = {
&"npc_animation_library": ExtResource("4_12aul")
}

[node name="CollisionShape3D" type="CollisionShape3D" parent="." index="7"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.948553, 0)
shape = SubResource("CapsuleShape3D_4lf16")

[node name="AudioDie" type="AudioStreamPlayer3D" parent="." index="8"]
stream = ExtResource("5_sgjlc")

[node name="AudioJump" type="AudioStreamPlayer3D" parent="." index="9"]
stream = ExtResource("6_ekaqp")

[node name="BoneAttachment3D" type="BoneAttachment3D" parent="." index="10"]
transform = Transform3D(0.877728, -0.455823, -0.147711, 0.395875, 0.86353, -0.312407, 0.269956, 0.215734, 0.938394, -0.234799, 1.48745, 0.210719)
bone_name = "HeadTop_End"
bone_idx = 7
use_external_skeleton = true
external_skeleton = NodePath("../Armature/Skeleton3D")

[node name="MeshInstance3D" type="MeshInstance3D" parent="BoneAttachment3D" index="0"]
transform = Transform3D(-0.0430475, -0.999062, 0.00476965, 0.904082, -0.0369222, 0.42576, -0.425184, 0.02264, 0.904823, 0.00898132, -0.0739322, -0.136072)
mesh = SubResource("CylinderMesh_abmx6")
skeleton = NodePath("../../Armature/Skeleton3D")

[node name="BoneAttachment3D2" type="BoneAttachment3D" parent="." index="11"]
transform = Transform3D(0.877728, -0.455823, -0.147711, 0.395875, 0.86353, -0.312407, 0.269956, 0.215734, 0.938394, -0.0479057, 1.20444, 0.0180704)
bone_name = "Head"
bone_idx = 6
use_external_skeleton = true
external_skeleton = NodePath("../Armature/Skeleton3D")

[node name="MeshInstance3D" type="MeshInstance3D" parent="BoneAttachment3D2" index="0"]
transform = Transform3D(0.999112, -0.0350459, -0.023337, 0.0331317, 0.99641, -0.0779041, 0.0259837, 0.0770621, 0.996688, -0.0666139, 0.324786, 0.25444)
material_override = SubResource("StandardMaterial3D_xjqdh")
mesh = SubResource("QuadMesh_yuxsl")

[node name="MeshInstance3D2" type="MeshInstance3D" parent="BoneAttachment3D2" index="1"]
transform = Transform3D(0.999261, -0.0348232, -0.0162708, 0.0337857, 0.997614, -0.0602164, 0.0183287, 0.0596223, 0.998053, 0.093333, 0.327698, 0.253067)
material_override = SubResource("StandardMaterial3D_xjqdh")
mesh = SubResource("QuadMesh_yuxsl")

[node name="MeshInstance3D3" type="MeshInstance3D" parent="BoneAttachment3D2" index="2"]
transform = Transform3D(0.999261, -0.0348232, -0.0162708, 0.0337857, 0.997614, -0.0602164, 0.0183287, 0.0596223, 0.998053, 0.0165991, 0.354183, 0.253414)
material_override = SubResource("StandardMaterial3D_xjqdh")
mesh = SubResource("QuadMesh_hw6qt")
