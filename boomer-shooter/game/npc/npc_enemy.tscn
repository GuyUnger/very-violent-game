[gd_scene load_steps=13 format=3 uid="uid://0s22t0uld35g"]

[ext_resource type="PackedScene" uid="uid://cpfk5dfdx54m2" path="res://content/models/character.glb" id="1_3ocbx"]
[ext_resource type="Script" uid="uid://b25oyjhrmvks8" path="res://game/npc/npc_enemy.gd" id="2_3ocbx"]
[ext_resource type="AnimationNodeBlendTree" uid="uid://dqjgomdtemo5l" path="res://game/npc/npc_animation_blend_tree.tres" id="3_nde2q"]
[ext_resource type="AnimationLibrary" uid="uid://b0i7f5lwho16o" path="res://content/models/npc_animation_library.glb" id="4_3tmsd"]

[sub_resource type="SphereShape3D" id="SphereShape3D_3ocbx"]
radius = 5.0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_3ocbx"]
albedo_color = Color(0, 0, 0, 1)

[sub_resource type="BoxMesh" id="BoxMesh_3ocbx"]
size = Vector3(0.015, 0.045, 0.355)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_ye2x2"]
albedo_color = Color(0, 0, 0, 1)

[sub_resource type="CylinderMesh" id="CylinderMesh_ye2x2"]
top_radius = 0.01
bottom_radius = 0.01
height = 0.3

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_jjuis"]
albedo_color = Color(0, 0, 0, 1)

[sub_resource type="BoxMesh" id="BoxMesh_jjuis"]
size = Vector3(0.005, 0.07, 0.04)

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_3tmsd"]

[node name="NPCEnemy" groups=["aimables"] instance=ExtResource("1_3ocbx")]
collision_layer = 4
collision_mask = 0
script = ExtResource("2_3ocbx")
speed = 4.0
max_health = 20
health = 20

[node name="Skeleton3D" parent="Armature" index="0"]
bones/0/position = Vector3(-6.83457e-06, 0.000489199, 0.010901)
bones/1/position = Vector3(-3.8147e-08, 0.638219, -0.0273547)
bones/1/rotation = Quaternion(-0.0829499, -0.500654, -0.061356, 0.859477)
bones/2/rotation = Quaternion(-0.025101, 0.0277949, -0.00736656, 0.999271)
bones/3/rotation = Quaternion(0.0775124, 0.0503985, 0.0174467, 0.995564)
bones/4/rotation = Quaternion(0.0775849, 0.050247, 0.0175082, 0.995565)
bones/5/rotation = Quaternion(0.0763979, 0.0516873, 0.00691339, 0.995713)
bones/6/rotation = Quaternion(0.232929, 0.153678, 0.00703191, 0.960249)
bones/8/rotation = Quaternion(0.448025, 0.243207, -0.663251, 0.547926)
bones/9/rotation = Quaternion(0.323348, -0.153443, 0.227664, 0.905578)
bones/10/rotation = Quaternion(-0.00546331, 0.0119572, 0.554015, 0.832403)
bones/11/rotation = Quaternion(-0.0653865, -0.711328, -0.232397, 0.660097)
bones/12/rotation = Quaternion(0.128441, -0.031273, 0.814661, 0.56467)
bones/13/rotation = Quaternion(-0.0013523, 0.167725, -0.620504, 0.766056)
bones/14/rotation = Quaternion(0.107431, -0.00986334, -0.0933196, 0.989774)
bones/16/rotation = Quaternion(0.382104, 0.0829023, 0.316612, 0.864223)
bones/17/rotation = Quaternion(0.523099, -0.0190541, -0.0971299, 0.846504)
bones/18/rotation = Quaternion(0.177497, 0.0706523, -0.0161554, 0.981449)
bones/20/rotation = Quaternion(0.460069, -0.0267649, -0.0604075, 0.885422)
bones/21/rotation = Quaternion(0.5426, -0.0093743, -0.0638433, 0.837509)
bones/22/rotation = Quaternion(0.149863, -0.00620237, -0.0505862, 0.987392)
bones/24/rotation = Quaternion(0.48113, -0.221039, -0.424388, 0.734541)
bones/25/rotation = Quaternion(0.630973, 0.0222999, 0.0049996, 0.775468)
bones/26/rotation = Quaternion(0.222827, -0.0309287, 0.0171364, 0.974217)
bones/28/rotation = Quaternion(0.652722, -0.34387, 0.512289, 0.439622)
bones/29/rotation = Quaternion(0.164733, -0.0220096, -0.536244, 0.827539)
bones/30/rotation = Quaternion(-0.00156129, -0.0148103, -0.77696, 0.629374)
bones/31/rotation = Quaternion(-0.106856, 0.325805, 0.316565, 0.884432)
bones/32/rotation = Quaternion(0.206533, -0.0751789, -0.790954, 0.571038)
bones/33/rotation = Quaternion(-0.0651093, -0.207397, 0.744282, 0.6315)
bones/34/rotation = Quaternion(-0.0155484, -0.113623, 0.605911, 0.787223)
bones/36/rotation = Quaternion(0.177439, -0.0203442, -0.354264, 0.917931)
bones/37/rotation = Quaternion(0.415092, 0.0140102, 0.0786714, 0.906263)
bones/38/rotation = Quaternion(0.224668, -0.0715268, 0.0172676, 0.971653)
bones/40/rotation = Quaternion(0.439751, 0.00567738, 0.0858749, 0.893987)
bones/41/rotation = Quaternion(0.824044, 0.0130711, 0.0652263, 0.562606)
bones/42/rotation = Quaternion(0.158126, 0.00724934, 0.0471825, 0.986264)
bones/44/rotation = Quaternion(0.441069, 0.212389, 0.400895, 0.774359)
bones/45/rotation = Quaternion(0.776987, -0.0340012, -0.00259266, 0.628592)
bones/46/rotation = Quaternion(0.425457, 0.0223318, -0.0141876, 0.904592)
bones/48/rotation = Quaternion(0.0249005, 0.218666, 0.97547, -0.00479369)
bones/49/rotation = Quaternion(-0.307559, 0.0556599, -0.0523028, 0.948459)
bones/50/rotation = Quaternion(0.534158, -0.0621075, -0.192162, 0.820909)
bones/51/rotation = Quaternion(0.170772, -0.177854, 0.152105, 0.957115)
bones/53/rotation = Quaternion(-0.0492542, 0.182665, 0.981655, 0.0237021)
bones/54/rotation = Quaternion(-0.609585, 0.0174303, -0.00444893, 0.792517)
bones/55/rotation = Quaternion(0.414539, 0.0367101, 0.117823, 0.901625)
bones/56/rotation = Quaternion(0.249873, 0.174142, -0.164153, 0.938239)

[node name="PhysicalBoneSimulator3D" type="SpringBoneSimulator3D" parent="Armature/Skeleton3D" index="0"]
setting_count = 1
settings/0/root_bone_name = "Head"
settings/0/root_bone = 6
settings/0/end_bone_name = "Neck"
settings/0/end_bone = 5
settings/0/extend_end_bone = false
settings/0/center_from = 0
settings/0/individual_config = false
settings/0/rotation_axis = 3
settings/0/radius/value = 0.02
settings/0/radius/damping_curve = null
settings/0/stiffness/value = 1.0
settings/0/stiffness/damping_curve = null
settings/0/drag/value = 0.4
settings/0/drag/damping_curve = null
settings/0/gravity/value = 0.0
settings/0/gravity/damping_curve = null
settings/0/gravity/direction = Vector3(0, -1, 0)
settings/0/enable_all_child_collisions = false
settings/0/collision_count = 0

[node name="LookAtModifier3D" type="LookAtModifier3D" parent="Armature/Skeleton3D" index="1"]
unique_name_in_owner = true
bone_name = "mixamorig_Head"
bone = 6

[node name="AnimationTree" type="AnimationTree" parent="." index="1"]
root_motion_track = NodePath("Armature/Skeleton3D:Root")
root_motion_local = false
tree_root = ExtResource("3_nde2q")
anim_player = NodePath("../AnimationPlayer")
parameters/HitBody/active = false
parameters/HitBody/internal_active = false
parameters/HitBody/request = 0
parameters/HitHead/active = false
parameters/HitHead/internal_active = false
parameters/HitHead/request = 0
parameters/MoveDirection/blend_position = Vector2(1, 0)
parameters/Special/current_state = "Moving"
parameters/Special/transition_request = ""
parameters/Special/current_index = 0
parameters/TimeScale/scale = 1.0

[node name="RootMotionView" type="RootMotionView" parent="." index="2"]
animation_path = NodePath("../AnimationTree")

[node name="Vision" type="Area3D" parent="." index="3"]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.56873, 0)
collision_layer = 2
collision_mask = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="Vision" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 4.51003)
shape = SubResource("SphereShape3D_3ocbx")

[node name="LeftHandBoneAttachment" type="BoneAttachment3D" parent="." index="4"]
transform = Transform3D(-0.575657, -0.51673, 0.633726, -0.235709, 0.846984, 0.476507, -0.782981, 0.12493, -0.609371, -0.0852612, 1.14094, 0.450606)
bone_name = "mixamorig_LeftHandMiddle1"
use_external_skeleton = true
external_skeleton = NodePath("../Armature/Skeleton3D")

[node name="RightHandBoneAttachment2" type="BoneAttachment3D" parent="." index="5"]
transform = Transform3D(0.241708, -0.494647, -0.834806, 0.816935, 0.56799, -0.100018, 0.523635, -0.657807, 0.541383, -0.136379, 1.11061, 0.130604)
bone_name = "mixamorig_RightHandMiddle3"
use_external_skeleton = true
external_skeleton = NodePath("../Armature/Skeleton3D")

[node name="SickAssGun" type="MeshInstance3D" parent="RightHandBoneAttachment2" index="0"]
transform = Transform3D(-0.0686942, 1.26062, 0.733297, -0.513229, 0.666252, -1.19345, -1.3651, -0.313923, 0.411793, 0.145057, -0.0653292, 0.02294)
material_override = SubResource("StandardMaterial3D_3ocbx")
mesh = SubResource("BoxMesh_3ocbx")
skeleton = NodePath("../..")

[node name="RightHand" type="Marker3D" parent="RightHandBoneAttachment2/SickAssGun" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.0971346)

[node name="LeftHand" type="Marker3D" parent="RightHandBoneAttachment2/SickAssGun" index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.0891441)

[node name="MeshInstance3D2" type="MeshInstance3D" parent="RightHandBoneAttachment2/SickAssGun" index="2"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, -0.000823617, 0.0554796)
material_override = SubResource("StandardMaterial3D_ye2x2")
mesh = SubResource("CylinderMesh_ye2x2")
skeleton = NodePath("../../..")

[node name="MeshInstance3D" type="MeshInstance3D" parent="RightHandBoneAttachment2/SickAssGun" index="3"]
transform = Transform3D(1, 0, 0, 0, 0.990105, -0.140331, 0, 0.140331, 0.990105, 0, -0.0524004, -0.0874176)
material_override = SubResource("StandardMaterial3D_jjuis")
mesh = SubResource("BoxMesh_jjuis")

[node name="AnimationPlayer" type="AnimationPlayer" parent="." index="6"]
root_motion_track = NodePath("Armature/Skeleton3D:Root")
root_motion_local = false
libraries = {
&"npc_animation_library": ExtResource("4_3tmsd")
}

[node name="CollisionShape3D" type="CollisionShape3D" parent="." index="7"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.846338, 0)
shape = SubResource("CapsuleShape3D_3tmsd")
