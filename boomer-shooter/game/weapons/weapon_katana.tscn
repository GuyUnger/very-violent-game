[gd_scene load_steps=14 format=3 uid="uid://cmkjerra3prvk"]

[ext_resource type="Script" uid="uid://bbpc4wmq08n3" path="res://game/weapons/weapon_katana.gd" id="1_md2vn"]
[ext_resource type="AudioStream" uid="uid://b3gscbjbxoncv" path="res://game/weapons/pickup_sfx/pickup_katana 01.wav" id="2_r6x4p"]
[ext_resource type="AudioStream" uid="uid://jclmgjq5a3ox" path="res://game/weapons/pickup_sfx/pickup_katana 02.wav" id="3_nojjb"]
[ext_resource type="AudioStream" uid="uid://wymh85haoo41" path="res://game/weapons/pickup_sfx/pickup_katana 03.wav" id="4_5j5ad"]
[ext_resource type="AudioStream" uid="uid://c8upeygvs5fhl" path="res://game/weapons/pickup_sfx/pickup_katana 04.wav" id="5_haru8"]
[ext_resource type="PackedScene" uid="uid://txiwcgjd6ttq" path="res://game/weapons/model/weapon_katana.glb" id="6_ceojl"]
[ext_resource type="PackedScene" uid="uid://bj461hqyda2ec" path="res://game/weapons/model/weapon_katana_arm.glb" id="7_vstlh"]
[ext_resource type="PackedScene" uid="uid://cdy80iee3cmu0" path="res://game/weapons/pickup_glow.tscn" id="8_esp2f"]
[ext_resource type="AudioStream" uid="uid://bw1o76708a7dx" path="res://content/sfx/gun_shot_smg.wav" id="12_3kcls"]

[sub_resource type="SphereShape3D" id="SphereShape3D_7w4b6"]
radius = 0.25

[sub_resource type="Animation" id="Animation_vstlh"]
resource_name = "attack"
length = 0.5
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("WorldModel/Katana:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.3, 0.5),
"transitions": PackedFloat32Array(0.297302, 0.297302, 1, -2),
"update": 0,
"values": [Vector3(-0.0959931, 0.0610865, 0.497419), Vector3(0.820257, 1.40943, 0.966594), Vector3(0.263913, 0.355663, 0.562521), Vector3(-0.0959931, 0.0610865, 0.497419)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("WorldModel/Katana:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.1, 0.3, 0.5),
"transitions": PackedFloat32Array(0.297302, 0.297302, 1, -2),
"update": 0,
"values": [Vector3(-0.005, -0.03, -0.05), Vector3(0.44998, -0.363213, 0.0731208), Vector3(-0.153851, -0.177731, -0.00133739), Vector3(-0.005, -0.03, -0.05)]
}

[sub_resource type="Animation" id="Animation_ceojl"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("WorldModel/Katana:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(-0.0959931, 0.0610865, 0.497419)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("WorldModel/Katana:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(-0.005, -0.03, -0.05)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_md2vn"]
_data = {
&"RESET": SubResource("Animation_ceojl"),
&"attack": SubResource("Animation_vstlh")
}

[node name="WeaponKatana" type="CharacterBody3D"]
collision_layer = 0
collision_mask = 0
script = ExtResource("1_md2vn")
pickup_sounds = Array[AudioStream]([ExtResource("2_r6x4p"), ExtResource("3_nojjb"), ExtResource("4_5j5ad"), ExtResource("5_haru8")])

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("SphereShape3D_7w4b6")

[node name="AudioShoot" type="AudioStreamPlayer" parent="."]
unique_name_in_owner = true
bus = &"SFX"

[node name="WorldModel" type="Node3D" parent="."]
unique_name_in_owner = true

[node name="RightHand" type="Marker3D" parent="WorldModel"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.0971346)

[node name="LeftHand" type="Marker3D" parent="WorldModel"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.0891441)

[node name="Katana" parent="WorldModel" instance=ExtResource("6_ceojl")]
transform = Transform3D(0.874386, -0.481411, 0.0607675, 0.474962, 0.874771, 0.0958457, -0.0992988, -0.0549439, 0.99354, -0.005, -0.03, -0.05)

[node name="Hand" parent="WorldModel/Katana" instance=ExtResource("7_vstlh")]
unique_name_in_owner = true
visible = false

[node name="AudioShootNPC" type="AudioStreamPlayer3D" parent="."]
unique_name_in_owner = true
top_level = true
stream = ExtResource("12_3kcls")
volume_db = -6.0
bus = &"SFX"

[node name="AudioPickup" type="AudioStreamPlayer" parent="."]
unique_name_in_owner = true

[node name="PickupGlow" parent="." instance=ExtResource("8_esp2f")]

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_md2vn")
}
